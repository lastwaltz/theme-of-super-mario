%% main
Fs  = 44.1e3;       % sampling freq
r   = 2^(1/12);     % ratio (equal temperament)
t   = 0 : 1/Fs : 1; % time vector
l= 2^3*3*272;       % tempo
m = zeros(l,1);     % mute

for k = 1:40 
    s(:, k) = 0.1 * square(2 * pi * 440 * (r^(k-24)) * t);  % melo, chorus
    b(:, k) = 0.4 * sin(2 * pi * 440 * (r^(k-36)) * t);     % bass
end

d = 0.2 * rand(length(t),1); % rhythm

p2i = mario2i(l,m,s,b,d);
p22 = mario22(l,m,s,b,d);
p23 = mario23(l,m,s,b,d);
p24 = mario24(l,m,s,b,d);
p25 = mario25(l,m,s,b,d);
p26 = mario26(l,m,s,b,d);
p27 = mario27(l,m,s,b,d);
p28 = mario28(l,m,s,b,d);
p2o = mario2o(l,m,s,b);

% p = ([p2i;p22;p22;p23;p24;p23;p24;p25;p26;p22;p22;p27;p28;p27;p28;p25;p26;p27;p28;p2o]); % full version
p = ([p2i;p22;p22;p23;p24;p25;p26;p27;p28;p2o]); % short version

sound(p,Fs) % playback

%% intro
function p = mario2i(l,m,s,b,d)

s1 = [s(1:l,21); s(1:l,21); m; s(1:l,21); m; s(1:l,21);...
      s(1:l,21); m; s(1:l,26); m; m; m;s(1:l,22); m; m; m];

s2 = [s(1:l,31); s(1:l,31); m; s(1:l,31); m; s(1:l,27);...
      s(1:l,31); m; s(1:l,34); m; m; m;s(1:l,34); m; m; m];

s3 = [b(1:l,17); b(1:l,17); m; b(1:l,17); m; b(1:l,17);...
      b(1:l,17); m;b(1:l,34); m; m; m;b(1:l,22); m; m; m];
  
s4 = [d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;...
      d(1:l);m;m;d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8)];

p = s1 + s2 + s3 +s4;

end

%% part 2
function p = mario22(l,m,s,b,d)

s1 = [s(1:l,27);m;m;s(1:l,22);m;m; s(1:l,19);m;m;...
      s(1:l,24);m;s(1:l,26);m;s(1:l,25);s(1:l,24);m;...
      s(1:l,22);m(1:l/3);s(1:l,27);m(1:l/3);s(1:l,31);m(1:l/3);s(1:l,36);m(1:l);...
      s(1:l,32);s(1:l,34);m;s(1:l,31);m;s(1:l,27);s(1:l,29);s(1:l,26);m;m];

s2 = [s(1:l,19);m;m;s(1:l,15);m;m; s(1:l,10);m;m;...
      s(1:l,15);m;s(1:l,17);m;s(1:l,16);s(1:l,15);m;...
      s(1:l,15);m(1:l/3);s(1:l,19);m(1:l/3);s(1:l,26);m(1:l/3);s(1:l,27);m(1:l);...
      s(1:l,24);s(1:l,26);m;s(1:l,22);m;s(1:l,19);s(1:l,20);s(1:l,17);m;m];

s3 = [b(1:l,22);m;m;b(1:l,19);m;m;b(1:l,15);m;m;...
      b(1:l,20);m;b(1:l,22);m;b(1:l,21);b(1:l,20);m;...
      b(1:l,22);m(1:l/3);b(1:l,27);m(1:l/3);b(1:l,31);m(1:l/3);b(1:l,32);m(1:l);...
      b(1:l,29);b(1:l,31);m;b(1:l,27);m;b(1:l,24);b(1:l,26);b(1:l,22);m;m];
  
s4 = [d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8)];  

p = s1 + s2 + s3 + s4;

end

%% part 3
function p = mario23(l,m,s,b,d)

s1 = [m;m;s(1:l,34);s(1:l,33);s(1:l,32);s(1:l,30);m;...
      s(1:l,31);m;s(1:l,20);s(1:l,24);s(1:l,27);m;s(1:l,24);s(1:l,27);s(1:l,29);...
      m;m;s(1:l,34);s(1:l,33);s(1:l,32);s(1:l,30);m;...
      s(1:l,31);m;s(1:l,39);m;s(1:l,39);s(1:l,39);m;m;m];

s2 = [m;m;s(1:l,31);s(1:l,30);s(1:l,29);s(1:l,26);m;...
      s(1:l,27);m;s(1:l,17);s(1:l,20);s(1:l,24);m;s(1:l,19);s(1:l,20);s(1:l,22);...
      m;m;s(1:l,31);s(1:l,30);s(1:l,29);s(1:l,26);m;...
      s(1:l,27);m;s(1:l,34);m;s(1:l,34);s(1:l,34);m;m;m];

s3 = [b(1:l, 15);m;m;b(1:l, 19);m;m;b(1:l,22);m;b(1:l,20);m;m;...
      b(1:l,27);b(1:l,27);b(1:l,27);b(1:l,20);m;...
      b(1:l, 15);m;m;b(1:l, 19);m;m;b(1:l,22);b(1:l,27);m;...
      s(1:l,32);m;s(1:l,32);s(1:l,32);m;b(1:l,22);m];

s4 = [d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8)];       

p = s1+s2+s3+s4;

end
%% part 4 
function p = mario24(l,m,s,b,d)

s1 = [m;m;s(1:l,34);s(1:l,33);s(1:l,32);s(1:l,30);m;...
      s(1:l,31);m;s(1:l,20);s(1:l,24);s(1:l,27);m;s(1:l,24);s(1:l,27);s(1:l,29);...
      m;m;s(1:l,30);m;m;s(1:l,29);m;m;s(1:l,27);m;m;m;m;m;m;m];

s2 = [m;m;s(1:l,31);s(1:l,30);s(1:l,29);s(1:l,26);m;...
      s(1:l,27);m;s(1:l,17);s(1:l,20);s(1:l,24);m;s(1:l,19);s(1:l,20);s(1:l,22);...
      m;m;s(1:l,23);m;m;s(1:l,20);m;m;s(1:l,19);m;m;m;m;m;m;m];

s3 = [b(1:l, 15);m;m;b(1:l,19);m;m;b(1:l,22);m;b(1:l,20);m;m;...
      b(1:l,27);b(1:l,27);b(1:l,27);b(1:l,20);m;...
      m;m;b(1:l,23);m;m;b(1:l,25);m;m;b(1:l,27);m;m;b(1:l,22);b(1:l,22);m;b(1:l,15);m];

s4 = [d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/8);m(1:7*l/8);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:1*l/8);d(1:l/8);m(1:5*l/8)];     

p = s1 + s2 + s3 + s4; 

end

%% part 5
function p = mario25(l,m,s,b,d)

s1 = [s(1:l,27);s(1:l,27);m;s(1:l,27);m;s(1:l,27);s(1:l,29);m;...
      s(1:l,31);s(1:l,27);m;s(1:l,24);s(1:l,22);m;m;m;...
      s(1:l,27);s(1:l,27);m;s(1:l,27);m;s(1:l,27);s(1:l,29);s(1:l,31);m;m;m;m;m;m;m;m];

s2 = [s(1:l,23);s(1:l,23);m;s(1:l,23);m;s(1:l,23);s(1:l,25);m;...
      s(1:l,22);s(1:l,19);m;s(1:l,19);s(1:l,15);m;m;m;...
      s(1:l,23);s(1:l,23);m;s(1:l,23);m;s(1:l,23);s(1:l,25);s(1:l,22);m;m;m;m;m;m;m;m];

s3 = [b(1:l,11);m;m;b(1:l, 18);m;m;b(1:l,23);m;...
      b(1:l,22);m;m;b(1:l, 15);m;m;b(1:l,10);m;...
      b(1:l,11);m;m;b(1:l, 18);m;m;b(1:l,23);m;b(1:l,22);m;m;b(1:l,15);m;m;b(1:l,10);m];
  
s4 = [d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;...
      d(1:l);m;m;d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);...
      d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;...
      d(1:l);m;m;d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);];

p = s1 + s2 + s3 + s4;

end

%% part 6
function p = mario26(l,m,s,b,d)

s1 = [s(1:l,27);s(1:l,27);m;s(1:l,27);m;s(1:l,27);s(1:l,29);m;...
      s(1:l,31);s(1:l,27);m;s(1:l,24);s(1:l,22);m;m;m;...
      s(1:l,31);s(1:l,31);m;s(1:l,31);m;s(1:l,27);s(1:l,31);m;s(1:l,34);m;m;m;s(1:l,22);m;m;m];

s2 = [s(1:l,23);s(1:l,23);m;s(1:l,23);m;s(1:l,23);s(1:l,25);m;...
      s(1:l,22);s(1:l,19);m;s(1:l,19);s(1:l,15);m;m;m;...
      s(1:l,21);s(1:l,21);m;s(1:l,21);m;s(1:l,21);s(1:l,21);m;s(1:l,26);m;m;m;m;m;m;m];

s3 = [b(1:l,11);m;m;b(1:l, 18);m;m;b(1:l,23);m;...
      b(1:l,22);m;m;b(1:l, 15);m;m;b(1:l,10);m;...
      b(1:l,17);b(1:l,17);m;b(1:l,17);m;b(1:l,17);b(1:l,17);m;b(1:l,22);m;m;m;b(1:l,22);m;m;m];
  
s4 = [d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;...
      d(1:l);m;m;d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);...
      d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l);m;...
      d(1:l);m;m;d(1:l);m;d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);d(1:l/8);m(1:7*l/8);];

p = s1 + s2 + s3 + s4;

end

%% part 7
function p = mario27(l,m,s,b,d)

s1 = [s(1:l,31);s(1:l,27);m;s(1:l,22);m;m;s(1:l,23);m;...
      s(1:l,24);s(1:l,32);m;s(1:l,32);s(1:l,24);m;m;m;...
      s(1:l,26);m(1:l/3);s(1:l,36);m(1:l/3);s(1:l,36);m(1:l/3);s(1:l,36);m(1:l/3);s(1:l,34);m(1:l/3);s(1:l,32);m(1:l/3);...
      s(1:l,31);s(1:l,27);m,;s(1:l,24);s(1:l,22);m;m;m];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
s2 = [s(1:l,27);s(1:l,22);m;s(1:l,19);m;m;s(1:l,19);m;...
      s(1:l,20);s(1:l,27);m;s(1:l,27);s(1:l,20);m;m;m;...
      s(1:l,22);m(1:l/3);s(1:l,32);m(1:l/3);s(1:l,32);m(1:l/3);s(1:l,32);m(1:l/3);s(1:l,31);m(1:l/3);s(1:l,29);m(1:l/3);...
      s(1:l,27);s(1:l,24);m,;s(1:l,20);s(1:l,19);m;m;m];

s3 = [b(1:l,15);m;m;b(1:l,22);b(1:l,23);m;b(1:l,27);m;...
      b(1:l,20);m;b(1:l,20);m;b(1:l,27);b(1:l,27);b(1:l,20);m;...
      b(1:l,17);m;m;b(1:l,20);b(1:l,22);m;b(1:l,26);m;...
      b(1:l,22);m;b(1:l,22);m;b(1:l,27);b(1:l,27);b(1:l,22);m];
  
s4 = [d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8);...
      d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8);...
      d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8);...
      d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
      d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8)];

p = s1 + s2 + s3 + s4;

end

%% prt 8
function p = mario28(l,m,s,b,d)

s1 = [s(1:l,31);s(1:l,27);m;s(1:l,22);m;m;s(1:l,23);m;...
      s(1:l,24);s(1:l,32);m;s(1:l,32);s(1:l,24);m;m;m;...
      s(1:l,26);s(1:l,32);m;s(1:l,32);s(1:l,32);m(1:l/3);s(1:l,31);m(1:l/3);s(1:l,29);m(1:l/3);...
      s(1:l,27);m;m;m;m;m;m;m];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
s2 = [s(1:l,27);s(1:l,22);m;s(1:l,19);m;m;s(1:l,19);m;...
      s(1:l,20);s(1:l,27);m;s(1:l,27);s(1:l,20);m;m;m;...
      s(1:l,22);s(1:l,29);m;s(1:l,29);s(1:l,29);m(1:l/3);s(1:l,27);m(1:l/3);s(1:l,26);m(1:l/3);...
      s(1:l,27);s(1:l,19);m;s(1:l,19);s(1:l,15);m;m;m];

s3 = [b(1:l,15);m;m;b(1:l,22);b(1:l,23);m;b(1:l,27);m;...
      b(1:l,20);m;b(1:l,20);m;b(1:l,27);b(1:l,27);b(1:l,20);m;...
      b(1:l,22);m;m;b(1:l,22);b(1:l,22);m(1:l/3);b(1:l,24);m(1:l/3);b(1:l,26);m(1:l/3);...
      b(1:l,27);m;b(1:l,22);m;b(1:l,15);m;m;m];

  s4 = [d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
        d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8);...
        d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
        d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8);...
        d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
        d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8);...
        d(1:l/8);m;m;m;m(1:1*l/8);d(1:l/8);m(1:5*l/8);...
        d(1:l/2);m(1:l/2);m;d(1:l/8);m;m(1:7*l/8)];
  
p = s1 + s2 + s3 + s4;

end

%% outro
function p = mario2o(l,m,s,b)

s1 = [s(1:l,27);m;m;s(1:l,22);m;m; s(1:l,19);m;m;s(1:l,24);s(1:l,26);s(1:l,24);...
      s(1:2*l,23);s(1:2*l,25);s(1:2*l,23);s(1:end,22);s(1:end,22)];
  
s2 = [s(1:l,19);m;m; s(1:l,17);m;m; s(1:l,15);m;m;...]
      s(1:3*l,20); s(1:5*l,20); m; s(1:l,19);s(1:l,17);s(1:end-2*l,19);s(1:end,19)];
    
s3 = [b(1:l,22);m;m; b(1:l,19);m;m; b(1:l,15);m;m;... 
      b(1:3*l,20); b(1:5*l,17); m; b(1:end,15);b(1:end,15)];

p = s1 + s2 + s3;

end